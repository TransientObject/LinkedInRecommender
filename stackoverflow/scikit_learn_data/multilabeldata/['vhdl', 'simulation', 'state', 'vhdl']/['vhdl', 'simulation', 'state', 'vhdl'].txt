VHDL state transitions based on if statements - works on board but doesn&#39;t work in simulator
